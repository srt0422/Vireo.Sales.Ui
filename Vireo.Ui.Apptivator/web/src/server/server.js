!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(0),a=n(u),o=r(4),c=n(o),s=r(1),i=n(s),l=r(12),f=n(l),p=r(13),d=n(p),h=r(14),v=n(h),b=v.default,x=function(){function e(t){(0,f.default)(this,e),this.name=t}return(0,d.default)(e,[{key:"save",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(a.default.mark(function e(t){var r,n=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect(this.name);case 2:return e.next=4,new c.default(function(e,r){try{n.source.insertOne(t,n.getInsertCallback(e,r))}catch(e){r(new Error(e))}});case 4:return r=e.sent,e.next=7,this.dispose();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"get",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(a.default.mark(function e(t){var r,n=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect(this.name);case 2:return e.next=4,new c.default(function(e,r){try{return n.source.findOne({id:t},n.getFetchCallback(e,r))}catch(e){r(new Error(e))}});case 4:return r=e.sent,e.next=7,this.dispose();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"getAll",value:function(){function e(){return t.apply(this,arguments)}var t=(0,i.default)(a.default.mark(function e(){var t,r=this;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect(this.name);case 2:return e.next=4,new c.default(function(e,t){try{return r.source.find().toArray(function(r,n){r?t(new Error(r)):e(n)})}catch(e){t(e)}});case 4:return t=e.sent,e.next=7,this.dispose();case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"getInsertCallback",value:function(e,t){return function(r,n){r?t(new Error(r)):e(n.insertedId)}}},{key:"getFetchCallback",value:function(e,t){return function(r,n){r?t(new Error(r)):e(n)}}},{key:"dispose",value:function(){this.dataSource&&this.dataSource.close()}},{key:"connect",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,i.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.connect();case 3:r=e.sent,this.source=r.collection(t),this.dataSource&&this.dataSource.close(),this.dataSource=r,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,c.default.reject(new Error(e.t0));case 13:case"end":return e.stop()}},e,this,[[0,9]])}));return e}()}]),e}();t.default=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),u=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=new u.default("customers")},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),u=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=new u.default("charges")},function(e,t,r){r(7),e.exports=r(8)},function(e,t){e.exports=require("babel-polyfill")},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var u=r(0),a=n(u),o=r(1),c=n(o),s=r(9),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),l=r(10),f=n(l),p=r(16),d=new i.Server;process.env.PORT?d.connection({port:process.env.PORT}):d.connection({port:process.env.PORT||3001,host:process.env.HOST||"localhost"}),d.register([{register:r(18),options:{headers:["Accept","Authorization","Content-Type","If-None-Match","Accept-Language","Accept-Encoding","Access-Control-Request-Headers","Access-Control-Request-Method","DNT","Connection","Host","Origin","Refferer","User-Agent"],origins:["http://localhost:3000"]}},{register:r(19),options:{handlerName:"await"}}],function(e){d.start(function(e){if(e)throw e;console.log("Server running at: "+d.info.uri)})}),d.route({method:"POST",path:"/api/appContents",handler:{await:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,c.default)(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.appContentsCollection.save(t.payload);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",r(e.t0));case 8:return e.abrupt("return",r().code(201));case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return e}()}}),d.route({method:"GET",path:"/api/appContents",handler:{await:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,c.default)(a.default.mark(function e(t,r){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.appContentsCollection.getAll();case 3:return n=e.sent,console.log(n),e.abrupt("return",r(n));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",r(e.t0));case 11:return e.abrupt("return",r().code(201));case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return e}()}}),d.route({method:"POST",path:"/api/payments",handler:{await:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,c.default)(a.default.mark(function e(t,r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.default.makePayment(t.payload.token,t.payload.email);case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",r(e.t0));case 8:return e.abrupt("return",r().code(201));case 9:case"end":return e.stop()}},e,this,[[0,5]])}));return e}()}}),d.route({method:"GET",path:"/api/payments",handler:{await:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,c.default)(a.default.mark(function e(t,r){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.chargesCollection.getAll();case 2:return n=e.sent,console.log(n),e.abrupt("return",r(n));case 5:case"end":return e.stop()}},e,this)}));return e}()}}),d.route({method:"GET",path:"/api/customers",handler:{await:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,c.default)(a.default.mark(function e(t,r){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.customersCollection.getAll();case 2:return n=e.sent,console.log(n),e.abrupt("return",r(n));case 5:case"end":return e.stop()}},e,this)}));return e}()}})},function(e,t){e.exports=require("hapi")},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(0),a=n(u),o=r(1),c=n(o),s=r(11),i=r(3),l=n(i),f=r(5),p=n(f),d=new s.Stripe("sk_test_OHx1Z0IcyDglKviPsmA8ZEtQ");t.default={makePayment:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,c.default)(a.default.mark(function e(t,r){var n,u;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.customers.create({email:r,source:t});case 3:return n=e.sent,l.default.save(n),e.next=7,d.charges.create({amount:100,currency:"usd",customer:n.id});case 7:u=e.sent,p.default.save(u),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return e}()}},function(e,t){e.exports=require("stripe")},function(e,t){e.exports=require("babel-runtime/helpers/classCallCheck")},function(e,t){e.exports=require("babel-runtime/helpers/createClass")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),u=function(e){return e&&e.__esModule?e:{default:e}}(n),a=r(15),o=null;t.default={connect:function(){return new u.default(function(e,t){try{a.MongoClient.connect("mongodb://40.78.96.177:27017/apptivator",function(r,n){r&&t(r),o=n,e(n)})}catch(e){t(new Error(e))}})},disconnect:function(){o&&(o.close(),o=null)}}},function(e,t){e.exports=require("mongodb")},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(3);Object.defineProperty(t,"customersCollection",{enumerable:!0,get:function(){return n(u).default}});var a=r(5);Object.defineProperty(t,"chargesCollection",{enumerable:!0,get:function(){return n(a).default}});var o=r(17);Object.defineProperty(t,"appContentsCollection",{enumerable:!0,get:function(){return n(o).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),u=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=new u.default("appContents")},function(e,t){e.exports=require("hapi-cors")},function(e,t){e.exports=require("overjoy-await")}]));